<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Holidays</title>

<!-- Open Graph metadata -->
<meta property="og:type" content="website">
<meta property="og:title" content="Happy Holidays">
<meta property="og:description" content="Wishing you health, happiness, and prosperity in 2026">
<meta property="og:image" content="https://martincking.github.io/ChristmasCard/Slide1.PNG">
<meta property="og:url" content="https://martincking.github.io/ChristmasCard/index.html">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: black;
}

.slideshow {
  position: relative;
  width: 100%;
  height: 100vh;
  background: black;
  overflow-y: auto;
  overflow-x: hidden;
  scroll-snap-type: y mandatory;
  -webkit-overflow-scrolling: touch;
}

.slide {
  position: relative;
  width: 100%;
  height: 100vh;
  background: black;
  scroll-snap-align: start;
  opacity: 0;
  transition: opacity 1s ease-in-out;
}

.slide.show {
  opacity: 1;
}

.slide img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

/* ---------- UI HUD ---------- */
.hud {
  position: fixed;
  top: 12px;
  right: 12px;
  z-index: 9999;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-size: 14px;
  color: #fff;
  user-select: none;
  pointer-events: none;
}

.hud .pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 999px;
  background: rgba(0,0,0,0.55);
  border: 1px solid rgba(255,255,255,0.18);
  backdrop-filter: blur(6px);
}

.hud .dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: currentColor;
}

.hud .hint {
  margin-top: 6px;
  font-size: 12px;
  opacity: 0.75;
  text-align: right;
}
</style>
</head>

<body>

<!-- HUD -->
<div class="hud">
  <div class="pill">
    <span class="dot" id="hudDot"></span>
    <span id="hudText">Playing</span>
  </div>
  <div class="hint" id="hudHint">Tap to pause • Scroll to browse</div>
</div>

<div class="slideshow" id="slideshow">
  <img src="Slide1.PNG">
  <img src="Slide2.PNG">
  <img src="Slide3.PNG">
  <img src="Slide4.PNG">
  <img src="Slide5.PNG">
  <img src="Slide6.PNG">
  <img src="IMG20251224123009.PNG">
  <img src="IMG20251220155230.PNG">
  <img src="IMG20251220155304.PNG">
</div>

<script>
(() => {
  const params = new URLSearchParams(location.search);

  const stillTime = parseFloat(params.get("time")) || 3;
  const fadeTime  = 1;

  const slideshow = document.getElementById("slideshow");

  // HUD elements
  const hudText = document.getElementById("hudText");
  const hudDot  = document.getElementById("hudDot");
  const hudHint = document.getElementById("hudHint");

  function setHud(paused, reason = "") {
    if (paused) {
      hudText.textContent = reason ? `Paused (${reason})` : "Paused";
      hudDot.style.color = "rgba(200,200,200,0.95)";
      hudHint.textContent = "Tap to play • Scroll to browse";
    } else {
      hudText.textContent = "Playing";
      hudDot.style.color = "rgba(120,255,160,0.95)";
      hudHint.textContent = "Tap to pause • Scroll to browse";
    }
  }

  // Grab original images
  const imgs = Array.from(slideshow.querySelectorAll("img"));

  // Wrap into slides
  const slides = imgs.map(img => {
    const wrap = document.createElement("div");
    wrap.className = "slide";
    img.parentNode.insertBefore(wrap, img);
    wrap.appendChild(img);
    return wrap;
  });

  let index = 0;
  let timer = null;
  let paused = false;
  let autoScrolling = false;
  let scrollDebounce = null;

  function showOnly(i) {
    slides.forEach((s, k) => s.classList.toggle("show", k === i));
  }

  function scrollToIndex(i, behavior = "smooth") {
    autoScrolling = true;
    slideshow.scrollTo({ top: slides[i].offsetTop, behavior });
    setTimeout(() => autoScrolling = false, 700);
  }

  function nextSlide() {
    index = (index + 1) % slides.length;
    showOnly(index);
    scrollToIndex(index);
  }

  function start() {
    stop();
    paused = false;
    setHud(false);
    timer = setInterval(nextSlide, (stillTime + fadeTime) * 1000);
  }

  function stop() {
    if (timer) clearInterval(timer);
    timer = null;
  }

  function togglePause(e) {
    if (e) e.preventDefault();
    paused ? start() : (paused = true, stop(), setHud(true));
  }

  function onScroll() {
    if (autoScrolling) return;

    if (!paused) {
      paused = true;
      stop();
      setHud(true, "scroll");
    }

    clearTimeout(scrollDebounce);
    scrollDebounce = setTimeout(() => {
      const pos = slideshow.scrollTop + window.innerHeight / 2;
      let best = 0, bestDist = Infinity;

      slides.forEach((s, i) => {
        const mid = s.offsetTop + s.offsetHeight / 2;
        const d = Math.abs(mid - pos);
        if (d < bestDist) { bestDist = d; best = i; }
      });

      index = best;
      showOnly(index);
    }, 120);
  }

  // Init
  showOnly(0);
  slideshow.scrollTo({ top: 0, behavior: "auto" });
  start();

  slideshow.addEventListener("click", togglePause);
  slideshow.addEventListener("touchstart", togglePause, { passive: false });
  slideshow.addEventListener("scroll", onScroll, { passive: true });
})();
</script>

</body>
</html>
